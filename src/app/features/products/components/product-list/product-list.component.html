<div class="container-fluid">
  <!-- <div class="d-flex justify-content-between align-items-center mb-3">
  </div> -->

  <!-- Buscador -->
  <div class="mb-3">
    <div class="input-group">
      <span class="input-group-text"><i class="bi bi-search">üîç</i></span>
      <input 
        type="text" 
        [(ngModel)]="searchTerm" 
        placeholder="Buscar producto o SKU..." 
        class="form-control"
      >
      
      <button class="btn btn-primary btn-sm" (click)="refreshList()" [disabled]="loading">
        <span *ngIf="loading" class="spinner-border spinner-border-sm me-2" role="status"></span>
        {{ loading ? 'Cargando...' : 'Actualizar' }}
      </button>
      
    </div>
  </div>

  <!-- Loading indicator -->
  <div *ngIf="loading" class="text-center py-5">
    <div class="spinner-border text-primary mb-3" role="status">
      <span class="visually-hidden">Cargando...</span>
    </div>
    <p class="text-muted">Cargando productos...</p>
  </div>

  <!-- Lista de productos -->
  <div *ngIf="!loading" class="row g-3">
    <div 
      *ngFor="let product of getFilteredProducts(); trackBy: trackByProductId"
      class="col-4"
    >
      <div 
        class="card h-100 cursor-pointer"
        [class.border-primary]="selectedProductId === product.id"
        [class.bg-light]="selectedProductId === product.id"
        (click)="onProductSelect(product)"
      >
        <div class="card-body p-3">
          <div class="d-flex justify-content-between align-items-start mb-2">
            <h5 class="card-title mb-0 text-truncate">{{ product.name }}</h5>
            <span class="badge bg-success fs-6 ms-2">${{ product.price | number:'1.2-2' }}</span>
          </div>
          
          <p class="card-text text-muted small mb-2" *ngIf="product.description">
            {{ product.description }}
          </p>
          
          <div class="d-flex justify-content-between align-items-center">
            <span 
              class="badge"
              [class.bg-success]="getStockStatus(product.stock) === 'in-stock'"
              [class.bg-warning]="getStockStatus(product.stock) === 'low-stock'"
              [class.bg-danger]="getStockStatus(product.stock) === 'out-of-stock'"
            >
              Stock: {{ product.stock }}
            </span>
            <small class="text-muted">ID: {{ product.id }}</small>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Empty state -->
  <div *ngIf="!loading && getFilteredProducts().length === 0" class="text-center py-5">
    <div class="no-products-div">üì¶</div>
    <p class="text-muted">{{ searchTerm ? 'No se encontraron productos que coincidan con la b√∫squeda' : 'No hay productos disponibles' }}</p>
  </div>
</div>